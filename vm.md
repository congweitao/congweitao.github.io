|测试序号|测试项目|测试方法|用例说明|测试步骤
|:-|:-|:-|:-|:-|
|1 |内存气球核内存限制技术测试|配置虚拟机使用内存气球技术，然后执行在线调整内存命令，查看虚拟机内存是否调整成功。通过virsh memtune命令将虚拟机内存限定在一定的范围之内，然后查看通过内存气球技术是否可以调整虚拟机内存为范围之外的.|内存气球可行性测试：修改虚拟机xml配置使用内存气球技术后，然后通过virsh命令在线调整内存查看是否可行 内存限制可行性测试：测试限制虚拟机内存在一定范围之内是否生效 |内存气球可行性测试：1、 向虚拟机xml中添加配置支持balloon 2、 执行qemu-monitor-command vm –hmp –cmd balloon <memsize>命令调整内存大小 3、 在虚拟机中通过free查看内存 内存限制可行性测试 1、 通过virsh memtune命令限制虚拟机内存大小范围 2、 使用内存气球技术分配限制之内的内存大小，并查看是否成功 3、 使用内存气球技术分配限制之外的内存大小，并查看是否成功
|2 |磁盘缓存模式测试 |分别对虚拟机配置writeback、writethrough、directsync、none和unsafe缓存模式，在其上执行fio测试磁盘性能，并进行对比。	为虚拟机设置不同的磁盘缓存模式，然后利用fio测试磁盘性能，进行对比 | 1、 修改虚拟机镜像，下载fio，编写fio测试脚本，并设置为自启动 2、 设置虚拟机磁盘缓存模式为directsync，同时启动30台虚拟机，保存测试结果 3、 设置虚拟机磁盘缓存模式为none，同时启动30台虚拟机，保存测试结果 4、 设置虚拟机磁盘缓存模式为unsafe，同时启动30台虚拟机，保存测试结果 5、 设置虚拟机磁盘缓存模式为writeback，同时启动30台虚拟机，保存测试结果 6、 设置虚拟机磁盘缓存模式为writethrough，同时启动30台虚拟机，保存测试结果 7、 对五种模式下的fio测试数据进行分析
|3 |CPU热添加测试 |执行virsh setvcpus命令动态添加cpu，查看虚拟机内部cpu数量是否发生变化。	测试能否通过virsh setvcpus方式热添加cpu	|1、 修改虚拟机xml配置，预分配4个vcpu，已分配2个vcpu 2、 执行virsh setvcpus命令添加cpu数量 3、 进入虚拟机执行cat /proc/cpuinfo查看cpu信息
|4 |网卡透传测试|透过virsh attach命令透传网卡到虚拟机中，进入虚拟机测试是否存在该网卡和能否正常上网。测试是否可以将host端的网卡透传到虚拟机中	|1、 创建一个包含网卡设备信息的xml文件 2、 通过virsh attach-device命令透传给虚拟机 3、 进入虚拟机查看网卡信息
|5 |巨页测试|下载UnixBench测试套件，编译，执行./Run开始测试。针对为虚拟机使用巨页和不使用巨页两种情况执行上述测试，获取测试分数并进行对比.|服务器只启动一台虚拟机，针对配置巨页和不配置巨页两种情况，分别运行unixbench跑分并对比；服务器同时启动15台虚拟机，针对配置巨页和不配置巨页两种情况，分别运行unixbench跑分并对比.|服务器只启动一台虚拟机，针对配置巨页和不配置巨页两种情况，分别运行unixbench跑分并对比：
1、 修改虚拟机xml配置使用巨页，然后启动虚拟机，并进入虚拟机执行unixbench测试，保存测试结果
2、 修改虚拟机xml配置不使用巨页，然后启动虚拟机，并进入虚拟机执行unixbench测试，保存测试结果
3、 对测试结果进行对比分析
服务器同时启动15台虚拟机，针对配置巨页和不配置巨页两种情况，分别运行unixbench跑分并对比：
1、 修改虚拟机镜像，开机自启动unixbench测试
2、 修改虚拟机xml配置使用巨页，然后同时启动15台虚拟机，保存测试结果
3、 修改虚拟机xml配置不使用巨页，然后同时启动15台虚拟机，保存测试结果
4、 对测试结果进行对比分析
